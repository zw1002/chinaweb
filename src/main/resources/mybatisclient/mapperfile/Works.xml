<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="WorksMapper">
  <resultMap id="BaseResultMap" type="Works">
    <id column="uid" jdbcType="VARCHAR" property="uid" />
    <result column="workstype" jdbcType="VARCHAR" property="workstype" />
    <result column="worksname" jdbcType="VARCHAR" property="worksname" />
    <result column="uptime" jdbcType="TIMESTAMP" property="uptime" />
    <result column="samllurl" jdbcType="VARCHAR" property="samllurl" />
    <result column="worksurl" jdbcType="VARCHAR" property="worksurl" />
    <result column="watermakeurl" jdbcType="VARCHAR" property="watermakeurl" />
    <result column="dpinum" jdbcType="VARCHAR" property="dpinum" />
    <result column="imgsize" jdbcType="DOUBLE" property="imgsize" />
    <result column="imgformart" jdbcType="VARCHAR" property="imgformart" />
    <result column="colrmodel" jdbcType="VARCHAR" property="colrmodel" />
    <result column="downcount" jdbcType="INTEGER" property="downcount" />
    <result column="favcount" jdbcType="INTEGER" property="favcount" />
    <result column="displayflag" jdbcType="VARCHAR" property="displayflag" />
    <result column="delflag" jdbcType="VARCHAR" property="delflag" />
    <result column="checkuser" jdbcType="VARCHAR" property="checkuser" />
    <result column="chacktime" jdbcType="TIMESTAMP" property="chacktime" />
    <result column="merchid" jdbcType="VARCHAR" property="merchid" />
    <result column="ticknums" jdbcType="INTEGER" property="ticknums" />
    <result column="oknums" jdbcType="INTEGER" property="oknums" />
    <result column="workremark" jdbcType="VARCHAR" property="workremark" />
    <result column="worklabel" jdbcType="VARCHAR" property="worklabel" />
    <result column="price" jdbcType="DECIMAL" property="price" />
  </resultMap>
  <sql id="Base_Column_List">
    uid, workstype, worksname, uptime, samllurl, worksurl, watermakeurl, dpinum, imgsize,
    imgformart, colrmodel, downcount, favcount, displayflag, delflag, checkuser, chacktime, 
    merchid, ticknums, oknums, workremark, worklabel, price
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from tb_works
    where uid = #{uid,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    delete from tb_works
    where uid = #{uid,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.hnqj.model.Works">
    insert into tb_works (uid, workstype, worksname,
      uptime, samllurl, worksurl, 
      watermakeurl, dpinum, imgsize, 
      imgformart, colrmodel, downcount, 
      favcount, displayflag, delflag, 
      checkuser, chacktime, merchid, 
      ticknums, oknums, workremark, 
      worklabel, price)
    values (#{uid,jdbcType=VARCHAR}, #{workstype,jdbcType=VARCHAR}, #{worksname,jdbcType=VARCHAR}, 
      #{uptime,jdbcType=TIMESTAMP}, #{samllurl,jdbcType=VARCHAR}, #{worksurl,jdbcType=VARCHAR}, 
      #{watermakeurl,jdbcType=VARCHAR}, #{dpinum,jdbcType=VARCHAR}, #{imgsize,jdbcType=DOUBLE}, 
      #{imgformart,jdbcType=VARCHAR}, #{colrmodel,jdbcType=VARCHAR}, #{downcount,jdbcType=INTEGER}, 
      #{favcount,jdbcType=INTEGER}, #{displayflag,jdbcType=VARCHAR}, #{delflag,jdbcType=VARCHAR}, 
      #{checkuser,jdbcType=VARCHAR}, #{chacktime,jdbcType=TIMESTAMP}, #{merchid,jdbcType=VARCHAR}, 
      #{ticknums,jdbcType=INTEGER}, #{oknums,jdbcType=INTEGER}, #{workremark,jdbcType=VARCHAR}, 
      #{worklabel,jdbcType=VARCHAR}, #{price,jdbcType=DECIMAL})
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.hnqj.model.Works">
    update tb_works
    set workstype = #{workstype,jdbcType=VARCHAR},
      worksname = #{worksname,jdbcType=VARCHAR},
      uptime = #{uptime,jdbcType=TIMESTAMP},
      samllurl = #{samllurl,jdbcType=VARCHAR},
      worksurl = #{worksurl,jdbcType=VARCHAR},
      watermakeurl = #{watermakeurl,jdbcType=VARCHAR},
      dpinum = #{dpinum,jdbcType=VARCHAR},
      imgsize = #{imgsize,jdbcType=DOUBLE},
      imgformart = #{imgformart,jdbcType=VARCHAR},
      colrmodel = #{colrmodel,jdbcType=VARCHAR},
      downcount = #{downcount,jdbcType=INTEGER},
      favcount = #{favcount,jdbcType=INTEGER},
      displayflag = #{displayflag,jdbcType=VARCHAR},
      delflag = #{delflag,jdbcType=VARCHAR},
      checkuser = #{checkuser,jdbcType=VARCHAR},
      chacktime = #{chacktime,jdbcType=TIMESTAMP},
      merchid = #{merchid,jdbcType=VARCHAR},
      ticknums = #{ticknums,jdbcType=INTEGER},
      oknums = #{oknums,jdbcType=INTEGER},
      workremark = #{workremark,jdbcType=VARCHAR},
      worklabel = #{worklabel,jdbcType=VARCHAR},
      price = #{price,jdbcType=DECIMAL}
    where uid = #{uid,jdbcType=VARCHAR}
  </update>
  <!--设计等推荐通用接口-->
  <select id="getWorksForTypeAndCount" parameterType="pd" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from tb_works
    where workstype in(
    select keyvalue from tb_dict where parentid=(
    select uid from tb_dict where keyvalue = #{type}
    )
    )
    order by downcount desc
    <if test="count != null and count != ''">
      LIMIT #{offset},#{count}
    </if>
  </select>
  <!--会员作品推荐-->
  <select id="getWorksForMerchId" parameterType="pd" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from tb_works
    where merchid = #{merchid}
    order by downcount desc
    <if test="count != null and count != ''">
      LIMIT #{offset},#{count}
    </if>
  </select>
</mapper>